{"version":3,"sources":["model.ts","damage.ts","DamageView.tsx","ExternalSiteView.tsx","RomajiToKatakana.ts","PokemonSelect.tsx","MyPartyEditor.tsx","OpponentPartyEditor.tsx","PartyEditor.tsx","MatchSelector.tsx","logSaver.ts","Logging.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["MoveKindList","MoveKindLong","MoveKindShort","PokemonTypeList","PokemonTypeShort","DynamaxMoveNames","EmptyMyPokemonMove","name","type","moveKind","power","EmptyMyPokemon","attrs","type1","type2","hp","a","b","c","d","s","moves","chosen","EmptyBothParty","myParty","myPokemons","opponentParty","opponentPokemons","typeMatch","f","value","Math","floor","CalcStatusHP","base","iv","ev","level","CalcStatusNonHP","nature","natureCoef","CalcDamage","attack","defend","moveType","attackerType1","attackerType2","defenderType1","defenderType2","GetTypeMatchCharacter","IsSameTypeMove","BaseStatView","pokemonName","pokemonDataset","className","SpeedView","myPokemon","opponentPokemon","saisoku","junsoku","saisokuscarf","junsokuscarf","mufuri","saiti","toString","AttackDamageOneMove","move","opponentData","defendBase","allmax","hpmax","AttackDamageView","map","i","key","DefendDamageOneMove","attackBase","nonatureup","DefendDamageView","moveKindString","DamageView","selectedMatchPokemon","ExternalSiteView","props","url","useMemo","baseName","match","suffix","includes","pokemonNameToCanonical","cachedUrls","useRef","current","filter","cachedUrl","unshift","slice","pushCachedUrl","href","target","rel","style","display","title","src","referrerPolicy","tree","u","e","o","k","y","h","t","q","n","m","r","w","g","z","j","v","p","x","l","sortedPokemons","Object","keys","sort","PokemonSelect","React","forwardRef","ref","onChange","onSubmit","useState","romaji","setRomaji","filteredPokemons","setFilteredPokemons","onRomajiChange","useCallback","newRomaji","filtered","length","katakana","original","str","replace","String","fromCharCode","charCodeAt","toLowerCase","result","tmp","index","len","node","push","char","toRoot","charAt","next","prev","convertRomanToKana","startsWith","useEffect","onInputKeydown","preventDefault","onKeyDown","PokemonTypeSelect","pokemonType","emptyMessage","MoveInput","onSelectMoveName","moveInfo","moveDataset","find","min","max","Number","MyPokemonEditor","newMove","setNewMove","newDynamaxMove","setNewDinamaxMove","originalPower","onSelectPokemon","onSortMoveClick","direction","newMoves","newIndex","onDeleteMove","splice","onClick","MyPartyEditor","editingPokemon","setEditingPokemon","pokes","onChosenChange","checked","newPokes","onSortPokemonClick","onEditPokemonClick","editPoke","onDeletePokemonClick","poke","OpponentPartyEditor","newPokemon","setNewPokemon","newPokemonInputRef","onAddPokemonClick","setTimeout","focus","PartyEditor","setMyParty","newMyParty","party","setOpponentParty","newOpponentParty","getMatch","selectedMatch","myPokemonIndex","opponentPokemonIndex","MatchSelector","setSelectedMyPokemonIndex","newMatch","setSelectedOpponentPokemonIndex","getLog","localStorage","getItem","putMessage","message","setItem","appendLog","Logging","setMessage","displayMessage","setDisplayMessage","savedMessage","setSavedMessage","onTextareaKeydown","shiftKey","Date","toISOString","onGameEndClick","gameResult","myChoices","join","opponentChoices","onClearLogClick","removeItem","App","location","useLocation","history","useHistory","partyJSON","URLSearchParams","search","get","JSON","parse","displayPartyEditor","setDisplayPartyEditor","setSelectedMatch","setSelectedMatchPokemon","onMatchSelectorChange","stringify","Boolean","window","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.e7ad3c75.chunk.js","sourcesContent":["export type MoveKind = 'physical' | 'special' | 'status';\r\nexport const MoveKindList: MoveKind[] = ['physical', 'special', 'status'];\r\nexport const MoveKindLong: { [key in MoveKind]: string } = {\r\n    'physical': '物理',\r\n    'special': '特殊',\r\n    'status': '変化',\r\n};\r\nexport const MoveKindShort: { [key in MoveKind]: string } = {\r\n    'physical': '物',\r\n    'special': '特',\r\n    'status': '変',\r\n};\r\n\r\nexport type PokemonType = '' | 'ノーマル' | 'かくとう' | 'ひこう' | 'どく' | 'じめん' | 'いわ' | 'むし' | 'ゴースト' | 'はがね' | 'ほのお' | 'みず' | 'くさ' | 'でんき' | 'エスパー' | 'こおり' | 'ドラゴン' | 'あく' | 'フェアリー';\r\nexport const PokemonTypeList: PokemonType[] = ['', 'ノーマル', 'かくとう', 'ひこう', 'どく', 'じめん', 'いわ', 'むし', 'ゴースト', 'はがね', 'ほのお', 'みず', 'くさ', 'でんき', 'エスパー', 'こおり', 'ドラゴン', 'あく', 'フェアリー'];\r\nexport const PokemonTypeShort: { [key in PokemonType]: string } = {\r\n    '': '',\r\n    'ノーマル': 'ノ',\r\n    'かくとう': '格',\r\n    'ひこう': '飛',\r\n    'どく': '毒',\r\n    'じめん': '地',\r\n    'いわ': '岩',\r\n    'むし': '虫',\r\n    'ゴースト': 'ゴ',\r\n    'はがね': '鋼',\r\n    'ほのお': '炎',\r\n    'みず': '水',\r\n    'くさ': '草',\r\n    'でんき': '電',\r\n    'エスパー': 'エ',\r\n    'こおり': '氷',\r\n    'ドラゴン': 'ド',\r\n    'あく': '悪',\r\n    'フェアリー': 'フ',\r\n};\r\n\r\nexport const DynamaxMoveNames: { [key in PokemonType]: string } = {\r\n    '': 'ダイウォール',\r\n    'ノーマル': 'ダイアタック',\r\n    'かくとう': 'ダイナックル',\r\n    'ひこう': 'ダイジェット',\r\n    'どく': 'ダイアシッド',\r\n    'じめん': 'ダイアース',\r\n    'いわ': 'ダイロック',\r\n    'むし': 'ダイワーム',\r\n    'ゴースト': 'ダイホロウ',\r\n    'はがね': 'ダイスチル',\r\n    'ほのお': 'ダイバーン',\r\n    'みず': 'ダイストリーム',\r\n    'くさ': 'ダイソウゲン',\r\n    'でんき': 'ダイサンダー',\r\n    'エスパー': 'ダイサイコ',\r\n    'こおり': 'ダイアイス',\r\n    'ドラゴン': 'ダイドラグーン',\r\n    'あく': 'ダイアーク',\r\n    'フェアリー': 'ダイフェアリー',\r\n};\r\n\r\nexport function getDynamaxMovePower(type: PokemonType, originalPower: number): number {\r\n    if (type === 'かくとう' || type === 'どく') {\r\n        if (originalPower <= 40) {\r\n            return 70;\r\n        } else if (originalPower <= 50) {\r\n            return 75;\r\n        } else if (originalPower <= 60) {\r\n            return 80;\r\n        } else if (originalPower <= 70) {\r\n            return 85;\r\n        } else if (originalPower <= 100) {\r\n            return 90;\r\n        } else if (originalPower <= 140) {\r\n            return 95;\r\n        } else {\r\n            return 100;\r\n        }\r\n    } else {\r\n        if (originalPower <= 40) {\r\n            return 90;\r\n        } else if (originalPower <= 50) {\r\n            return 100;\r\n        } else if (originalPower <= 60) {\r\n            return 110;\r\n        } else if (originalPower <= 70) {\r\n            return 120;\r\n        } else if (originalPower <= 100) {\r\n            return 130;\r\n        } else if (originalPower <= 140) {\r\n            return 140;\r\n        } else {\r\n            return 150;\r\n        }\r\n    }\r\n}\r\n\r\nexport interface PokemonData {\r\n    name: string;\r\n    type1: PokemonType;\r\n    type2: PokemonType;\r\n    hp: number;\r\n    a: number;\r\n    b: number;\r\n    c: number;\r\n    d: number;\r\n    s: number;\r\n}\r\n\r\nexport interface MyPokemonMove {\r\n    name: string;\r\n    type: PokemonType;\r\n    moveKind: MoveKind;\r\n    power: number;//威力, 変化技は0\r\n}\r\n\r\nexport const EmptyMyPokemonMove: MyPokemonMove = {\r\n    name: '',\r\n    type: 'ノーマル',\r\n    moveKind: 'physical',\r\n    power: 0,\r\n};\r\n\r\nexport interface MyPokemonAttrs {\r\n    type1: PokemonType;\r\n    type2: PokemonType;\r\n    hp: number;// 実数値\r\n    a: number;\r\n    b: number;\r\n    c: number;\r\n    d: number;\r\n    s: number;\r\n}\r\n\r\nexport interface MyPokemon {\r\n    name: string;\r\n    attrs: MyPokemonAttrs;\r\n    moves: MyPokemonMove[];\r\n    chosen: boolean;\r\n}\r\n\r\nexport const EmptyMyPokemon: MyPokemon = {\r\n    name: '',\r\n    attrs: { type1: '', type2: '', hp: 0, a: 0, b: 0, c: 0, d: 0, s: 0 },\r\n    moves: [],\r\n    chosen: true,\r\n};\r\n\r\nexport interface MyParty {\r\n    myPokemons: MyPokemon[];\r\n}\r\n\r\nexport const EmptyMyParty = {\r\n    myPokemons: []\r\n};\r\n\r\nexport interface OpponentPokemon {\r\n    name: string;\r\n    chosen: boolean;\r\n}\r\n\r\nexport interface OpponentParty {\r\n    opponentPokemons: OpponentPokemon[];\r\n}\r\n\r\nexport const EmptyOpponentParty: OpponentParty = {\r\n    opponentPokemons: []\r\n};\r\n\r\nexport interface BothParty {\r\n    myParty: MyParty;\r\n    opponentParty: OpponentParty;\r\n}\r\n\r\nexport const EmptyBothParty: BothParty = {\r\n    myParty: EmptyMyParty,\r\n    opponentParty: EmptyOpponentParty,\r\n};\r\n\r\n// [技タイプ][受けるポケモンのタイプ] = ダメージ補正*2\r\nexport const typeMatch: { [key in PokemonType]: { [key in PokemonType]: number } } = {\r\n    '': {\r\n        '': 2,\r\n        'かくとう': 2,\r\n        'ノーマル': 2,\r\n        'ひこう': 2,\r\n        'どく': 2,\r\n        'じめん': 2,\r\n        'いわ': 2,\r\n        'むし': 2,\r\n        'ゴースト': 2,\r\n        'はがね': 2,\r\n        'ほのお': 2,\r\n        'みず': 2,\r\n        'くさ': 2,\r\n        'でんき': 2,\r\n        'エスパー': 2,\r\n        'こおり': 2,\r\n        'ドラゴン': 2,\r\n        'あく': 2,\r\n        'フェアリー': 2,\r\n    },\r\n    'ノーマル': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 2,\r\n        'ひこう': 2,\r\n        'どく': 2,\r\n        'じめん': 2,\r\n        'いわ': 1,\r\n        'むし': 2,\r\n        'ゴースト': 0,\r\n        'はがね': 1,\r\n        'ほのお': 2,\r\n        'みず': 2,\r\n        'くさ': 2,\r\n        'でんき': 2,\r\n        'エスパー': 2,\r\n        'こおり': 2,\r\n        'ドラゴン': 2,\r\n        'あく': 2,\r\n        'フェアリー': 2,\r\n    },\r\n    'かくとう': {\r\n        '': 2,\r\n        'ノーマル': 4,\r\n        'かくとう': 2,\r\n        'ひこう': 1,\r\n        'どく': 1,\r\n        'じめん': 2,\r\n        'いわ': 4,\r\n        'むし': 1,\r\n        'ゴースト': 0,\r\n        'はがね': 4,\r\n        'ほのお': 2,\r\n        'みず': 2,\r\n        'くさ': 2,\r\n        'でんき': 2,\r\n        'エスパー': 1,\r\n        'こおり': 4,\r\n        'ドラゴン': 2,\r\n        'あく': 4,\r\n        'フェアリー': 1,\r\n    },\r\n    'ひこう': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 4,\r\n        'ひこう': 2,\r\n        'どく': 2,\r\n        'じめん': 2,\r\n        'いわ': 1,\r\n        'むし': 4,\r\n        'ゴースト': 2,\r\n        'はがね': 1,\r\n        'ほのお': 2,\r\n        'みず': 2,\r\n        'くさ': 4,\r\n        'でんき': 1,\r\n        'エスパー': 2,\r\n        'こおり': 2,\r\n        'ドラゴン': 2,\r\n        'あく': 2,\r\n        'フェアリー': 2,\r\n    },\r\n    'どく': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 2,\r\n        'ひこう': 2,\r\n        'どく': 1,\r\n        'じめん': 1,\r\n        'いわ': 1,\r\n        'むし': 2,\r\n        'ゴースト': 1,\r\n        'はがね': 0,\r\n        'ほのお': 2,\r\n        'みず': 2,\r\n        'くさ': 4,\r\n        'でんき': 2,\r\n        'エスパー': 2,\r\n        'こおり': 2,\r\n        'ドラゴン': 2,\r\n        'あく': 2,\r\n        'フェアリー': 4,\r\n    },\r\n    'じめん': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 2,\r\n        'ひこう': 0,\r\n        'どく': 4,\r\n        'じめん': 2,\r\n        'いわ': 4,\r\n        'むし': 1,\r\n        'ゴースト': 2,\r\n        'はがね': 4,\r\n        'ほのお': 4,\r\n        'みず': 2,\r\n        'くさ': 1,\r\n        'でんき': 4,\r\n        'エスパー': 2,\r\n        'こおり': 2,\r\n        'ドラゴン': 2,\r\n        'あく': 2,\r\n        'フェアリー': 2,\r\n    },\r\n    'いわ': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 1,\r\n        'ひこう': 4,\r\n        'どく': 2,\r\n        'じめん': 1,\r\n        'いわ': 2,\r\n        'むし': 4,\r\n        'ゴースト': 2,\r\n        'はがね': 1,\r\n        'ほのお': 4,\r\n        'みず': 2,\r\n        'くさ': 2,\r\n        'でんき': 2,\r\n        'エスパー': 2,\r\n        'こおり': 4,\r\n        'ドラゴン': 2,\r\n        'あく': 2,\r\n        'フェアリー': 2,\r\n    },\r\n    'むし': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 1,\r\n        'ひこう': 1,\r\n        'どく': 1,\r\n        'じめん': 2,\r\n        'いわ': 2,\r\n        'むし': 2,\r\n        'ゴースト': 1,\r\n        'はがね': 1,\r\n        'ほのお': 1,\r\n        'みず': 2,\r\n        'くさ': 4,\r\n        'でんき': 2,\r\n        'エスパー': 4,\r\n        'こおり': 2,\r\n        'ドラゴン': 2,\r\n        'あく': 4,\r\n        'フェアリー': 1,\r\n    },\r\n    'ゴースト': {\r\n        '': 2,\r\n        'ノーマル': 0,\r\n        'かくとう': 2,\r\n        'ひこう': 2,\r\n        'どく': 2,\r\n        'じめん': 2,\r\n        'いわ': 2,\r\n        'むし': 2,\r\n        'ゴースト': 4,\r\n        'はがね': 2,\r\n        'ほのお': 2,\r\n        'みず': 2,\r\n        'くさ': 2,\r\n        'でんき': 2,\r\n        'エスパー': 4,\r\n        'こおり': 2,\r\n        'ドラゴン': 2,\r\n        'あく': 1,\r\n        'フェアリー': 2,\r\n    },\r\n    'はがね': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 2,\r\n        'ひこう': 2,\r\n        'どく': 2,\r\n        'じめん': 2,\r\n        'いわ': 4,\r\n        'むし': 2,\r\n        'ゴースト': 2,\r\n        'はがね': 1,\r\n        'ほのお': 1,\r\n        'みず': 1,\r\n        'くさ': 2,\r\n        'でんき': 1,\r\n        'エスパー': 2,\r\n        'こおり': 4,\r\n        'ドラゴン': 2,\r\n        'あく': 2,\r\n        'フェアリー': 4,\r\n    },\r\n    'ほのお': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 2,\r\n        'ひこう': 2,\r\n        'どく': 2,\r\n        'じめん': 2,\r\n        'いわ': 1,\r\n        'むし': 4,\r\n        'ゴースト': 2,\r\n        'はがね': 4,\r\n        'ほのお': 1,\r\n        'みず': 1,\r\n        'くさ': 4,\r\n        'でんき': 2,\r\n        'エスパー': 2,\r\n        'こおり': 4,\r\n        'ドラゴン': 1,\r\n        'あく': 2,\r\n        'フェアリー': 2,\r\n    },\r\n    'みず': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 2,\r\n        'ひこう': 2,\r\n        'どく': 2,\r\n        'じめん': 4,\r\n        'いわ': 4,\r\n        'むし': 2,\r\n        'ゴースト': 2,\r\n        'はがね': 2,\r\n        'ほのお': 4,\r\n        'みず': 1,\r\n        'くさ': 1,\r\n        'でんき': 2,\r\n        'エスパー': 2,\r\n        'こおり': 2,\r\n        'ドラゴン': 1,\r\n        'あく': 2,\r\n        'フェアリー': 2,\r\n    },\r\n    'くさ': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 2,\r\n        'ひこう': 1,\r\n        'どく': 1,\r\n        'じめん': 4,\r\n        'いわ': 4,\r\n        'むし': 1,\r\n        'ゴースト': 2,\r\n        'はがね': 1,\r\n        'ほのお': 1,\r\n        'みず': 4,\r\n        'くさ': 1,\r\n        'でんき': 2,\r\n        'エスパー': 2,\r\n        'こおり': 2,\r\n        'ドラゴン': 1,\r\n        'あく': 2,\r\n        'フェアリー': 2,\r\n    },\r\n    'でんき': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 2,\r\n        'ひこう': 4,\r\n        'どく': 2,\r\n        'じめん': 0,\r\n        'いわ': 2,\r\n        'むし': 2,\r\n        'ゴースト': 2,\r\n        'はがね': 2,\r\n        'ほのお': 2,\r\n        'みず': 4,\r\n        'くさ': 1,\r\n        'でんき': 1,\r\n        'エスパー': 2,\r\n        'こおり': 2,\r\n        'ドラゴン': 1,\r\n        'あく': 2,\r\n        'フェアリー': 2,\r\n    },\r\n    'エスパー': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 4,\r\n        'ひこう': 2,\r\n        'どく': 4,\r\n        'じめん': 2,\r\n        'いわ': 2,\r\n        'むし': 2,\r\n        'ゴースト': 2,\r\n        'はがね': 1,\r\n        'ほのお': 2,\r\n        'みず': 2,\r\n        'くさ': 2,\r\n        'でんき': 2,\r\n        'エスパー': 1,\r\n        'こおり': 2,\r\n        'ドラゴン': 2,\r\n        'あく': 0,\r\n        'フェアリー': 2,\r\n    },\r\n    'こおり': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 2,\r\n        'ひこう': 4,\r\n        'どく': 2,\r\n        'じめん': 4,\r\n        'いわ': 2,\r\n        'むし': 2,\r\n        'ゴースト': 2,\r\n        'はがね': 1,\r\n        'ほのお': 1,\r\n        'みず': 1,\r\n        'くさ': 4,\r\n        'でんき': 2,\r\n        'エスパー': 2,\r\n        'こおり': 1,\r\n        'ドラゴン': 4,\r\n        'あく': 2,\r\n        'フェアリー': 2,\r\n    },\r\n    'ドラゴン': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 2,\r\n        'ひこう': 2,\r\n        'どく': 2,\r\n        'じめん': 2,\r\n        'いわ': 2,\r\n        'むし': 2,\r\n        'ゴースト': 2,\r\n        'はがね': 1,\r\n        'ほのお': 2,\r\n        'みず': 2,\r\n        'くさ': 2,\r\n        'でんき': 2,\r\n        'エスパー': 2,\r\n        'こおり': 2,\r\n        'ドラゴン': 4,\r\n        'あく': 2,\r\n        'フェアリー': 0,\r\n    },\r\n    'あく': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 1,\r\n        'ひこう': 2,\r\n        'どく': 2,\r\n        'じめん': 2,\r\n        'いわ': 2,\r\n        'むし': 2,\r\n        'ゴースト': 4,\r\n        'はがね': 2,\r\n        'ほのお': 2,\r\n        'みず': 2,\r\n        'くさ': 2,\r\n        'でんき': 2,\r\n        'エスパー': 4,\r\n        'こおり': 2,\r\n        'ドラゴン': 2,\r\n        'あく': 1,\r\n        'フェアリー': 1,\r\n    },\r\n    'フェアリー': {\r\n        '': 2,\r\n        'ノーマル': 2,\r\n        'かくとう': 4,\r\n        'ひこう': 2,\r\n        'どく': 1,\r\n        'じめん': 2,\r\n        'いわ': 2,\r\n        'むし': 2,\r\n        'ゴースト': 2,\r\n        'はがね': 1,\r\n        'ほのお': 1,\r\n        'みず': 2,\r\n        'くさ': 2,\r\n        'でんき': 2,\r\n        'エスパー': 2,\r\n        'こおり': 2,\r\n        'ドラゴン': 4,\r\n        'あく': 4,\r\n        'フェアリー': 2,\r\n    },\r\n};\r\n","// ステータス・ダメージ計算\r\n\r\nimport { PokemonType, typeMatch } from \"./model\";\r\n\r\nfunction f(value: number) {\r\n    return Math.floor(value);\r\n}\r\n\r\nexport const defaultLevel = 50;\r\nexport const ivMin = 0;\r\nexport const ivMax = 31;\r\nexport const evMin = 0;\r\nexport const evMax = 252;\r\n\r\n/**\r\n * HPステータス計算\r\n * @param base 種族値\r\n * @param iv 個体値\r\n * @param ev 努力値\r\n * @param level レベル\r\n */\r\nexport function CalcStatusHP(base: number, iv: number, ev: number, level: number = defaultLevel) {\r\n    return f((base * 2 + iv + f(ev / 4)) * level / 100) + level + 10;\r\n}\r\n\r\n/**\r\n * HP以外のステータス計算\r\n * @param base 種族値\r\n * @param iv 個体値\r\n * @param ev 努力値\r\n * @param nature 性格補正 負の数はマイナス補正、正の数はプラス補正、0は無補正\r\n * @param level レベル\r\n */\r\nexport function CalcStatusNonHP(base: number, iv: number, ev: number, nature: -1 | 0 | 1, level: number = defaultLevel) {\r\n    const natureCoef = nature < 0 ? 0.9 : (nature > 0 ? 1.1 : 1.0);\r\n    return f((f((base * 2 + iv + f(ev / 4)) * level / 100) + 5) * natureCoef);\r\n}\r\n\r\n/**\r\n * ダメージ計算\r\n * @param power 威力\r\n * @param attack 攻撃側の攻撃/特攻\r\n * @param defend 防御側の防御/特防\r\n * @param level 攻撃側のレベル\r\n * @param moveType 技のタイプ\r\n * @param attackerType1 攻撃側のタイプ1\r\n * @param attackerType2 攻撃側のタイプ2\r\n * @param defenderType1 防御側のタイプ1\r\n * @param defenderType2 防御側のタイプ2\r\n */\r\nexport function CalcDamage(\r\n    power: number, attack: number, defend: number, level: number,\r\n    moveType: PokemonType, attackerType1: PokemonType, attackerType2: PokemonType, defenderType1: PokemonType, defenderType2: PokemonType\r\n): number {\r\n    let value = f(f((f(level * 2 / 5) + 2) * power * attack / defend) / 50) + 2;\r\n    if (moveType !== '') {\r\n        if (moveType === attackerType1 || moveType === attackerType2) {\r\n            value = f(value * 1.5);\r\n        }\r\n\r\n        value = f(value * typeMatch[moveType][defenderType1] / 2);\r\n        value = f(value * typeMatch[moveType][defenderType2] / 2);\r\n    }\r\n    return value;\r\n}\r\n\r\n/**\r\n * タイプ相性を表示するための文字を取得\r\n * @param moveType \r\n * @param defenderType1 \r\n * @param defenderType2 \r\n */\r\nexport function GetTypeMatchCharacter(moveType: PokemonType, defenderType1: PokemonType, defenderType2: PokemonType) {\r\n    switch (typeMatch[moveType][defenderType1] * typeMatch[moveType][defenderType2]) {\r\n        case 0:\r\n            return '０';\r\n        case 1:\r\n            return '¼';\r\n        case 2:\r\n            return '½';\r\n        case 4:\r\n            return '１';\r\n        case 8:\r\n            return '２';\r\n        case 16:\r\n            return '４';\r\n        default:\r\n            return '？';\r\n    }\r\n}\r\n\r\n/**\r\n * タイプ一致技判定\r\n * @param moveType \r\n * @param attackerType1 \r\n * @param attackerType2 \r\n */\r\nexport function IsSameTypeMove(moveType: PokemonType, attackerType1: PokemonType, attackerType2: PokemonType) {\r\n    if (moveType !== '') {\r\n        if (moveType === attackerType1 || moveType === attackerType2) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n","import React from 'react';\r\nimport pokemonDataset from './data/pokemonDataset.json';\r\nimport { MyPokemon, PokemonType, PokemonTypeList, MyPokemonMove, MoveKind, PokemonTypeShort, OpponentPokemon, PokemonData, BothParty } from './model';\r\nimport { CalcStatusNonHP, defaultLevel, ivMax, evMax, evMin, ivMin, CalcDamage, CalcStatusHP, GetTypeMatchCharacter, IsSameTypeMove } from './damage';\r\nimport { SelectedMatchPokemon } from './MatchSelector';\r\n\r\nfunction BaseStatView({ pokemonName }: { pokemonName: string }) {\r\n    const d = pokemonDataset[pokemonName as keyof typeof pokemonDataset] as PokemonData;\r\n    if (!d) {\r\n        return null;\r\n    }\r\n    return (<table>\r\n        <thead><tr><th></th><th>タイプ</th><th>H</th><th>A</th><th>B</th><th>C</th><th>D</th><th>S</th></tr></thead>\r\n        <tbody><tr>\r\n            <td>{d.name}</td>\r\n            <td>{PokemonTypeShort[d.type1 as PokemonType]}{PokemonTypeShort[d.type2 as PokemonType]}</td>\r\n            <td className='numeric'>{d.hp}</td>\r\n            <td className='numeric'>{d.a}</td>\r\n            <td className='numeric'>{d.b}</td>\r\n            <td className='numeric'>{d.c}</td>\r\n            <td className='numeric'>{d.d}</td>\r\n            <td className='numeric'>{d.s}</td>\r\n        </tr></tbody>\r\n    </table>);\r\n}\r\n\r\nfunction SpeedView({ myPokemon, opponentPokemon }: { myPokemon: MyPokemon, opponentPokemon: OpponentPokemon }) {\r\n    const d = pokemonDataset[opponentPokemon.name as keyof typeof pokemonDataset] as PokemonData;\r\n    if (!d) {\r\n        return null;\r\n    }\r\n\r\n    const saisoku = CalcStatusNonHP(d.s, ivMax, evMax, 1, defaultLevel);\r\n    const junsoku = CalcStatusNonHP(d.s, ivMax, evMax, 0, defaultLevel);\r\n    const saisokuscarf = saisoku * 1.5 | 0;\r\n    const junsokuscarf = junsoku * 1.5 | 0;\r\n    const mufuri = CalcStatusNonHP(d.s, ivMax, evMin, 0, defaultLevel);\r\n    const saiti = CalcStatusNonHP(d.s, ivMin, evMin, -1, defaultLevel);\r\n    return (<table>\r\n        <thead><tr><th>自分</th><th>最速</th><th>準速</th><th>最ス</th><th>準ス</th><th>無振</th><th>最遅</th></tr></thead>\r\n        <tbody><tr>\r\n            <td className='numeric'>{myPokemon.attrs.s.toString()}</td>\r\n            <td className='numeric'>{saisoku.toString()}</td>\r\n            <td className='numeric'>{junsoku.toString()}</td>\r\n            <td className='numeric'>{saisokuscarf.toString()}</td>\r\n            <td className='numeric'>{junsokuscarf.toString()}</td>\r\n            <td className='numeric'>{mufuri.toString()}</td>\r\n            <td className='numeric'>{saiti.toString()}</td>\r\n        </tr></tbody>\r\n    </table>)\r\n}\r\n\r\nfunction AttackDamageOneMove({ myPokemon, move, opponentData }: { myPokemon: MyPokemon, move: MyPokemonMove, opponentData: PokemonData }) {\r\n    if (move.moveKind === 'status' || move.power === 0) {\r\n        return null;\r\n    }\r\n    const attack = move.moveKind === 'physical' ? myPokemon.attrs.a : myPokemon.attrs.c;\r\n    const defendBase = move.moveKind === 'physical' ? opponentData.b : opponentData.d;\r\n    const allmax = CalcDamage(move.power, attack, CalcStatusNonHP(defendBase, ivMax, evMax, 1, defaultLevel), defaultLevel, move.type, myPokemon.attrs.type1, myPokemon.attrs.type2, opponentData.type1, opponentData.type2) / CalcStatusHP(opponentData.hp, ivMax, evMax, defaultLevel);\r\n    const hpmax = CalcDamage(move.power, attack, CalcStatusNonHP(defendBase, ivMax, evMin, 0, defaultLevel), defaultLevel, move.type, myPokemon.attrs.type1, myPokemon.attrs.type2, opponentData.type1, opponentData.type2) / CalcStatusHP(opponentData.hp, ivMax, evMax, defaultLevel);\r\n    const mufuri = CalcDamage(move.power, attack, CalcStatusNonHP(defendBase, ivMax, evMin, 0, defaultLevel), defaultLevel, move.type, myPokemon.attrs.type1, myPokemon.attrs.type2, opponentData.type1, opponentData.type2) / CalcStatusHP(opponentData.hp, ivMax, evMin, defaultLevel);\r\n    return (<tr>\r\n        <td>{move.name}</td>\r\n        <td className={IsSameTypeMove(move.type, myPokemon.attrs.type1, myPokemon.attrs.type2) ? 'sameTypeMove' : ''}>{GetTypeMatchCharacter(move.type, opponentData.type1, opponentData.type2)}</td>\r\n        <td className='numeric'>{allmax * 100 | 0}</td>\r\n        <td className='numeric'>{hpmax * 100 | 0}</td>\r\n        <td className='numeric'>{mufuri * 100 | 0}</td>\r\n    </tr>);\r\n}\r\n\r\nfunction AttackDamageView({ myPokemon, opponentPokemon }: { myPokemon: MyPokemon, opponentPokemon: OpponentPokemon }) {\r\n    const opponentData = pokemonDataset[opponentPokemon.name as keyof typeof pokemonDataset] as PokemonData;\r\n    if (!opponentData) {\r\n        return null;\r\n    }\r\n\r\n    return (<table>\r\n        <thead><tr><th>技</th><th></th><th>最硬</th><th>H大</th><th>無振</th></tr></thead>\r\n        <tbody>\r\n            {myPokemon.moves.map((move, i) => <AttackDamageOneMove key={i} myPokemon={myPokemon} move={move} opponentData={opponentData} />)}\r\n        </tbody>\r\n    </table>)\r\n}\r\n\r\nfunction DefendDamageOneMove({ myPokemon, move, opponentData }: { myPokemon: MyPokemon, move: MyPokemonMove, opponentData: PokemonData }) {\r\n    if (move.moveKind === 'status' || move.power === 0) {\r\n        return null;\r\n    }\r\n    const attackBase = move.moveKind === 'physical' ? opponentData.a : opponentData.c;\r\n    const defend = move.moveKind === 'physical' ? myPokemon.attrs.b : myPokemon.attrs.d;\r\n    const allmax = CalcDamage(move.power, CalcStatusNonHP(attackBase, ivMax, evMax, 1, defaultLevel), defend, defaultLevel, move.type, opponentData.type1, opponentData.type2, myPokemon.attrs.type1, myPokemon.attrs.type2) / myPokemon.attrs.hp;\r\n    const nonatureup = CalcDamage(move.power, CalcStatusNonHP(attackBase, ivMax, evMax, 0, defaultLevel), defend, defaultLevel, move.type, opponentData.type1, opponentData.type2, myPokemon.attrs.type1, myPokemon.attrs.type2) / myPokemon.attrs.hp;\r\n    const mufuri = CalcDamage(move.power, CalcStatusNonHP(attackBase, ivMax, evMin, 0, defaultLevel), defend, defaultLevel, move.type, opponentData.type1, opponentData.type2, myPokemon.attrs.type1, myPokemon.attrs.type2) / myPokemon.attrs.hp;\r\n    return (<tr>\r\n        <td>{move.name}</td>\r\n        <td className={IsSameTypeMove(move.type, opponentData.type1, opponentData.type2) ? 'sameTypeMove' : ''}>{GetTypeMatchCharacter(move.type, myPokemon.attrs.type1, myPokemon.attrs.type2)}</td>\r\n        <td className='numeric'>{allmax * 100 | 0}</td>\r\n        <td className='numeric'>{nonatureup * 100 | 0}</td>\r\n        <td className='numeric'>{mufuri * 100 | 0}</td>\r\n    </tr>);\r\n}\r\n\r\nfunction DefendDamageView({ myPokemon, opponentPokemon }: { myPokemon: MyPokemon, opponentPokemon: OpponentPokemon }) {\r\n    const opponentData = pokemonDataset[opponentPokemon.name as keyof typeof pokemonDataset] as PokemonData;\r\n    if (!opponentData) {\r\n        return null;\r\n    }\r\n\r\n    return <>{(['physical', 'special'] as MoveKind[]).map((moveKind: MoveKind) => {\r\n        const moveKindString = moveKind === 'physical' ? '物' : '特'; return (<table key={moveKind}>\r\n            <thead><tr><th>技</th><th></th><th>最大</th><th>準大</th><th>無振</th></tr></thead>\r\n            <tbody>\r\n                {PokemonTypeList.map((type) => {\r\n                    return <DefendDamageOneMove key={type} myPokemon={myPokemon} move={{ name: `${PokemonTypeShort[type]}${moveKindString}`, moveKind, type, power: 100 }} opponentData={opponentData} />\r\n                })\r\n                }\r\n            </tbody>\r\n        </table>);\r\n    }\r\n    )}</>;\r\n}\r\n\r\nexport interface DamageViewProps {\r\n    party: BothParty;\r\n    selectedMatchPokemon: SelectedMatchPokemon;\r\n}\r\n\r\nexport function DamageView({ selectedMatchPokemon }: DamageViewProps) {\r\n    const myPokemon = selectedMatchPokemon.myPokemon;\r\n    const opponentPokemon = selectedMatchPokemon.opponentPokemon;\r\n    return (\r\n        <div className=\"DamageView\">\r\n            <div className=\"DamageViewBasic\">\r\n                {opponentPokemon && <BaseStatView pokemonName={opponentPokemon.name} />}\r\n                {myPokemon && opponentPokemon && <SpeedView myPokemon={myPokemon} opponentPokemon={opponentPokemon} />}\r\n            </div>\r\n            <div className=\"DamageViewDamage\">\r\n                {myPokemon && opponentPokemon && <AttackDamageView myPokemon={myPokemon} opponentPokemon={opponentPokemon} />}\r\n                {myPokemon && opponentPokemon && <DefendDamageView myPokemon={myPokemon} opponentPokemon={opponentPokemon} />}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useMemo, useRef } from 'react';\r\n\r\n/**\r\n * ポケモン名を http://wiki.pokebattle.net/ でのURLで使われる名前に変換\r\n * @param pokemonName \r\n */\r\nfunction pokemonNameToCanonical(pokemonName: string): string {\r\n    // 入力：'マタドガス', 'マタドガス (ガラルのすがた)'\r\n    // 出力：'マタドガス', 'マタドガス（ガラルのすがた）'\r\n    // 種族名以外でURLに入るのはリージョンフォルムのみ。\r\n\r\n    switch (pokemonName) {\r\n        case 'ポリゴン2':\r\n            return 'ポリゴン２';\r\n        case 'ポリゴンZ':\r\n            return 'ポリゴンＺ';\r\n        case 'タイプ:ヌル':\r\n            return 'タイプ：ヌル（タイプヌル）';\r\n    }\r\n\r\n    const baseName = pokemonName.match(/^([ァ-ヴー]+)/)?.[0];\r\n    if (!baseName) {\r\n        return '';\r\n    }\r\n\r\n    let suffix = '';\r\n    if (pokemonName.includes('アローラ')) {\r\n        suffix = '（アローラのすがた）';\r\n    } else if (pokemonName.includes('ガラル')) {\r\n        suffix = '（ガラルのすがた）';\r\n    }\r\n    return baseName + suffix;\r\n}\r\n\r\nfunction pokemonNameToURL(pokemonName: string) {\r\n    return `https://pokemon-wiki.net/${pokemonNameToCanonical(pokemonName)}`;\r\n}\r\n\r\nfunction pushCachedUrl(cachedUrls: string[], url: string): string[] {\r\n    cachedUrls = cachedUrls.filter((cachedUrl) => cachedUrl !== url);\r\n    cachedUrls.unshift(url);\r\n    cachedUrls = cachedUrls.slice(0, 10);\r\n    return cachedUrls;\r\n}\r\n\r\nexport function ExternalSiteView(props: { pokemonName: string }) {\r\n    const url = useMemo(() => pokemonNameToURL(props.pokemonName), [props.pokemonName]);\r\n    const cachedUrls = useRef<string[]>([]);\r\n    cachedUrls.current = pushCachedUrl(cachedUrls.current, url);\r\n    return (<div className=\"ExternalSiteView\">\r\n        <div className=\"wikiLink\">対戦wiki: <a href={url} target=\"_blank\" rel='noreferrer noopener'>{url}</a></div>\r\n        {cachedUrls.current.map((cachedUrl) => <iframe key={cachedUrl} style={{ display: cachedUrl === url ? 'block' : 'none' }} title=\"External Site\" src={cachedUrl} referrerPolicy='no-referrer'></iframe>)}\r\n    </div>)\r\n}\r\n","// https://qiita.com/recordare/items/35a27f6b88b9413fef91\r\n// by @recordare\r\n// '-'を'ー'に変換する処理を独自に追加\r\n\r\ninterface ITree {\r\n    [key: string]: ITree | string;\r\n}\r\n\r\nconst tree: ITree = {\r\n    a: 'ア', i: 'イ', u: 'ウ', e: 'エ', o: 'オ',\r\n    k: {\r\n        a: 'カ', i: 'キ', u: 'ク', e: 'ケ', o: 'コ',\r\n        y: { a: 'キャ', i: 'キィ', u: 'キュ', e: 'キェ', o: 'キョ' },\r\n    },\r\n    s: {\r\n        a: 'サ', i: 'シ', u: 'ス', e: 'セ', o: 'ソ',\r\n        h: { a: 'シャ', i: 'シ', u: 'シュ', e: 'シェ', o: 'ショ' },\r\n        y: { a: 'キャ', i: 'キィ', u: 'キュ', e: 'キェ', o: 'キョ' },\r\n    },\r\n    t: {\r\n        a: 'タ', i: 'チ', u: 'ツ', e: 'テ', o: 'ト',\r\n        h: { a: 'テャ', i: 'ティ', u: 'テュ', e: 'テェ', o: 'テョ' },\r\n        y: { a: 'チャ', i: 'チィ', u: 'チュ', e: 'チェ', o: 'チョ' },\r\n        s: { a: 'ツァ', i: 'ツィ', u: 'ツ', e: 'ツェ', o: 'ツォ' },\r\n    },\r\n    c: {\r\n        a: 'カ', i: 'シ', u: 'ク', e: 'セ', o: 'コ',\r\n        h: { a: 'チャ', i: 'チ', u: 'チュ', e: 'チェ', o: 'チョ' },\r\n        y: { a: 'チャ', i: 'チィ', u: 'チュ', e: 'チェ', o: 'チョ' },\r\n    },\r\n    q: {\r\n        a: 'クァ', i: 'クィ', u: 'ク', e: 'クェ', o: 'クォ',\r\n    },\r\n    n: {\r\n        a: 'ナ', i: 'ニ', u: 'ヌ', e: 'ネ', o: 'ノ', n: 'ン',\r\n        y: { a: 'ニャ', i: 'ニィ', u: 'ニュ', e: 'ニェ', o: 'ニョ' },\r\n    },\r\n    h: {\r\n        a: 'ハ', i: 'ヒ', u: 'フ', e: 'ヘ', o: 'ホ',\r\n        y: { a: 'ヒャ', i: 'ヒィ', u: 'ヒュ', e: 'ヒェ', o: 'ヒョ' },\r\n    },\r\n    f: {\r\n        a: 'ファ', i: 'フィ', u: 'フ', e: 'フェ', o: 'フォ',\r\n        y: { a: 'フャ', u: 'フュ', o: 'フョ' },\r\n    },\r\n    m: {\r\n        a: 'マ', i: 'ミ', u: 'ム', e: 'メ', o: 'モ',\r\n        y: { a: 'ミャ', i: 'ミィ', u: 'ミュ', e: 'ミェ', o: 'ミョ' },\r\n    },\r\n    y: { a: 'ヤ', i: 'イ', u: 'ユ', e: 'イェ', o: 'ヨ' },\r\n    r: {\r\n        a: 'ラ', i: 'リ', u: 'ル', e: 'レ', o: 'ロ',\r\n        y: { a: 'リャ', i: 'リィ', u: 'リュ', e: 'リェ', o: 'リョ' },\r\n    },\r\n    w: { a: 'ワ', i: 'ウィ', u: 'ウ', e: 'ウェ', o: 'ヲ' },\r\n    g: {\r\n        a: 'ガ', i: 'ギ', u: 'グ', e: 'ゲ', o: 'ゴ',\r\n        y: { a: 'ギャ', i: 'ギィ', u: 'ギュ', e: 'ギェ', o: 'ギョ' },\r\n    },\r\n    z: {\r\n        a: 'ザ', i: 'ジ', u: 'ズ', e: 'ゼ', o: 'ゾ',\r\n        y: { a: 'ジャ', i: 'ジィ', u: 'ジュ', e: 'ジェ', o: 'ジョ' },\r\n    },\r\n    j: {\r\n        a: 'ジャ', i: 'ジ', u: 'ジュ', e: 'ジェ', o: 'ジョ',\r\n        y: { a: 'ジャ', i: 'ジィ', u: 'ジュ', e: 'ジェ', o: 'ジョ' },\r\n    },\r\n    d: {\r\n        a: 'ダ', i: 'ヂ', u: 'ヅ', e: 'デ', o: 'ド',\r\n        h: { a: 'デャ', i: 'ディ', u: 'デュ', e: 'デェ', o: 'デョ' },\r\n        y: { a: 'ヂャ', i: 'ヂィ', u: 'ヂュ', e: 'ヂェ', o: 'ヂョ' },\r\n    },\r\n    b: {\r\n        a: 'バ', i: 'ビ', u: 'ブ', e: 'ベ', o: 'ボ',\r\n        y: { a: 'ビャ', i: 'ビィ', u: 'ビュ', e: 'ビェ', o: 'ビョ' },\r\n    },\r\n    v: {\r\n        a: 'ヴァ', i: 'ヴィ', u: 'ヴ', e: 'ヴェ', o: 'ヴォ',\r\n        y: { a: 'ヴャ', i: 'ヴィ', u: 'ヴュ', e: 'ヴェ', o: 'ヴョ' },\r\n    },\r\n    p: {\r\n        a: 'パ', i: 'ピ', u: 'プ', e: 'ペ', o: 'ポ',\r\n        y: { a: 'ピャ', i: 'ピィ', u: 'ピュ', e: 'ピェ', o: 'ピョ' },\r\n    },\r\n    x: {\r\n        a: 'ァ', i: 'ィ', u: 'ゥ', e: 'ェ', o: 'ォ',\r\n        y: {\r\n            a: 'ャ', i: 'ィ', u: 'ュ', e: 'ェ', o: 'ョ',\r\n        },\r\n        t: {\r\n            u: 'ッ',\r\n            s: {\r\n                u: 'ッ',\r\n            },\r\n        },\r\n    },\r\n    l: {\r\n        a: 'ァ', i: 'ィ', u: 'ゥ', e: 'ェ', o: 'ォ',\r\n        y: {\r\n            a: 'ャ', i: 'ィ', u: 'ュ', e: 'ェ', o: 'ョ',\r\n        },\r\n        t: {\r\n            u: 'ッ',\r\n            s: {\r\n                u: 'ッ',\r\n            },\r\n        },\r\n    },\r\n};\r\n\r\nexport function convertRomanToKana(original: string) {\r\n    const str = original.replace(/[Ａ-Ｚａ-ｚ]/, s => String.fromCharCode(s.charCodeAt(0) - 65248)).toLowerCase().replace(/-/g, 'ー'); // 全角→半角→小文字\r\n    let result = '';\r\n    let tmp = '';\r\n    let index = 0;\r\n    const len = str.length;\r\n    let node = tree;\r\n    const push = (char: string, toRoot = true) => {\r\n        result += char;\r\n        tmp = '';\r\n        node = toRoot ? tree : node;\r\n    };\r\n    while (index < len) {\r\n        const char = str.charAt(index);\r\n        if (char.match(/[a-z]/)) { // 英数字以外は考慮しない\r\n            if (char in node) {\r\n                const next = node[char];\r\n                if (typeof next === 'string') {\r\n                    push(next);\r\n                } else {\r\n                    tmp += original.charAt(index);\r\n                    node = next;\r\n                }\r\n                index++;\r\n                continue;\r\n            }\r\n            const prev = str.charAt(index - 1);\r\n            if (prev && (prev === 'n' || prev === char)) { // 促音やnへの対応\r\n                push(prev === 'n' ? 'ン' : 'ッ', false);\r\n            }\r\n            if (node !== tree && char in tree) { // 今のノードがルート以外だった場合、仕切り直してチェックする\r\n                push(tmp);\r\n                continue;\r\n            }\r\n        }\r\n        push(tmp + char);\r\n        index++;\r\n    }\r\n    tmp = tmp.replace(/n$/, 'ン'); // 末尾のnは変換する\r\n    push(tmp);\r\n    return result;\r\n}\r\n","import React, { useState, useCallback, useEffect } from 'react';\r\nimport pokemonDataset from './data/pokemonDataset.json';\r\nimport { convertRomanToKana } from './RomajiToKatakana';\r\n\r\nconst sortedPokemons = Object.keys(pokemonDataset).sort();\r\n\r\nexport interface PokemonSelectProps {\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    onSubmit?: () => void;\r\n}\r\n\r\nexport const PokemonSelect = React.forwardRef<HTMLInputElement, PokemonSelectProps>(({ value, onChange, onSubmit }: PokemonSelectProps, ref) => {\r\n    const [romaji, setRomaji] = useState('');\r\n    const [filteredPokemons, setFilteredPokemons] = useState(sortedPokemons);\r\n    const onRomajiChange = useCallback((newRomaji: string) => {\r\n        setRomaji(newRomaji);\r\n        let filtered: string[] = [];\r\n        if (newRomaji.length > 0) {\r\n            const katakana = convertRomanToKana(newRomaji);\r\n            filtered = sortedPokemons.filter((name) => name.startsWith(katakana));\r\n        }\r\n        if (filtered.length === 0) {\r\n            filtered = sortedPokemons;\r\n        }\r\n        setFilteredPokemons(filtered);\r\n        onChange(filtered[0]);\r\n    }, [onChange]);\r\n    useEffect(() => {\r\n        if (value.length === 0) {\r\n            setRomaji('');\r\n        }\r\n    }, [value]);\r\n\r\n    const onInputKeydown = useCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (onSubmit) {\r\n            if (e.key === 'Enter') {\r\n                e.preventDefault();\r\n                onSubmit();\r\n            }\r\n        }\r\n    }, [onSubmit]);\r\n\r\n    return (<span>\r\n        <input ref={ref} type=\"text\" value={romaji} onChange={(e) => onRomajiChange(e.target.value)} onKeyDown={onInputKeydown} />\r\n        <select value={value} onChange={(e) => onChange(e.target.value)}>\r\n            <option value=\"\">---ポケモン選択---</option>\r\n            {filteredPokemons.map((name) => <option key={name} value={name}>{name}</option>)}\r\n        </select></span>);\r\n});\r\n","import React, { useState, useCallback, useEffect } from 'react';\r\nimport { MyParty, MyPokemon, PokemonType, PokemonTypeList, EmptyMyPokemon, MyPokemonMove, MoveKind, EmptyMyPokemonMove, PokemonTypeShort, MoveKindLong, MoveKindList, MoveKindShort, DynamaxMoveNames, getDynamaxMovePower } from './model';\r\nimport { PokemonSelect } from './PokemonSelect';\r\nimport pokemonDataset from './data/pokemonDataset.json';\r\nimport moveDataset from './data/moveDataset.json';\r\n\r\nexport interface MyPokemonEditorProps {\r\n    value: MyPokemon;\r\n    onChange: (value: MyPokemon) => void;\r\n}\r\n\r\nfunction PokemonTypeSelect(props: { value: PokemonType, onChange: (value: PokemonType) => void, emptyMessage: string }) {\r\n    return (<select value={props.value} onChange={(e) => props.onChange(e.target.value as PokemonType)}>\r\n        {PokemonTypeList.map((pokemonType) => <option key={pokemonType} value={pokemonType}>{pokemonType || props.emptyMessage}</option>)}\r\n    </select>);\r\n}\r\n\r\nfunction MoveInput({ value, onChange }: { value: MyPokemonMove, onChange: (value: MyPokemonMove) => void }) {\r\n    const onSelectMoveName = useCallback((name: string) => {\r\n        const moveInfo = moveDataset.find((m) => m.name === name);\r\n        if (!moveInfo) {\r\n            return;\r\n        }\r\n        onChange({ name, type: moveInfo.type as PokemonType, moveKind: moveInfo.moveKind as MoveKind, power: moveInfo.power });\r\n    }, [onChange]);\r\n    return (<div>\r\n        技名:<select value={value.name} onChange={(e) => onSelectMoveName(e.target.value)}>\r\n            <option value=\"\">---技選択---</option>\r\n            {moveDataset.map((moveInfo) => <option key={moveInfo.name} value={moveInfo.name}>{moveInfo.name}</option>)}\r\n        </select>\r\n        <input type=\"text\" value={value.name} onChange={(e) => onChange({ ...value, name: e.target.value })} />\r\n        <PokemonTypeSelect value={value.type} onChange={(type) => onChange({ ...value, type })} emptyMessage=\"タイプ\" />\r\n        <select value={value.moveKind} onChange={(e) => onChange({ ...value, moveKind: e.target.value as MoveKind })}>\r\n            {MoveKindList.map((moveKind) => <option key={moveKind} value={moveKind}>{MoveKindLong[moveKind]}</option>)}\r\n        </select>\r\n        威力: <input type=\"number\" value={value.power.toString()} min={0} max={999} onChange={(e) => onChange({ ...value, power: Number(e.target.value) })} />\r\n    </div>\r\n    );\r\n}\r\n\r\nexport function MyPokemonEditor({ value, onChange }: MyPokemonEditorProps) {\r\n    const [newMove, setNewMove] = useState<MyPokemonMove>(EmptyMyPokemonMove);\r\n    const [newDynamaxMove, setNewDinamaxMove] = useState<MyPokemonMove>(EmptyMyPokemonMove);\r\n    useEffect(() => {\r\n        // 通常技に応じて対応するダイマックス技候補を表示\r\n        if (newMove.power === 0) {\r\n            setNewDinamaxMove({ name: DynamaxMoveNames[''], type: 'ノーマル', moveKind: 'status', power: 0 });\r\n        } else {\r\n            setNewDinamaxMove({ name: DynamaxMoveNames[newMove.type], type: newMove.type, moveKind: newMove.moveKind, power: getDynamaxMovePower(newMove.type, newMove.power) });\r\n        }\r\n    }, [newMove]);\r\n    const onSelectPokemon = useCallback((name: string) => {\r\n        const d = pokemonDataset[name as keyof typeof pokemonDataset] as PokemonData;\r\n        onChange({ ...value, name, attrs: { ...value.attrs, type1: d.type1, type2: d.type2 } });\r\n    }, [value, onChange]);\r\n    const onSortMoveClick = useCallback((index: number, direction: number) => {\r\n        const newMoves = [...value.moves];\r\n        const newIndex = index + direction;\r\n        if (newIndex < 0 || newIndex >= newMoves.length) {\r\n            return;\r\n        }\r\n        const tmp = newMoves[index];\r\n        newMoves[index] = newMoves[newIndex];\r\n        newMoves[newIndex] = tmp;\r\n        onChange({ ...value, moves: newMoves });\r\n    }, [value, onChange]);\r\n    const onDeleteMove = useCallback((index: number) => {\r\n        const newMoves = [...value.moves];\r\n        newMoves.splice(index, 1);\r\n        onChange({ ...value, moves: newMoves });\r\n    }, [value, onChange]);\r\n    return (<div>\r\n        <PokemonSelect value={value.name} onChange={(value) => onSelectPokemon(value)} />\r\n        <PokemonTypeSelect value={value.attrs.type1} onChange={(t) => onChange({ ...value, attrs: { ...value.attrs, type1: t } })} emptyMessage=\"タイプ1\" />\r\n        <PokemonTypeSelect value={value.attrs.type2} onChange={(t) => onChange({ ...value, attrs: { ...value.attrs, type2: t } })} emptyMessage=\"タイプ2\" />\r\n        HP: <input type=\"number\" min={0} max={999} value={value.attrs.hp.toString()} onChange={(e) => onChange({ ...value, attrs: { ...value.attrs, hp: Number(e.target.value) } })} />\r\n        A: <input type=\"number\" min={0} max={999} value={value.attrs.a.toString()} onChange={(e) => onChange({ ...value, attrs: { ...value.attrs, a: Number(e.target.value) } })} />\r\n        B: <input type=\"number\" min={0} max={999} value={value.attrs.b.toString()} onChange={(e) => onChange({ ...value, attrs: { ...value.attrs, b: Number(e.target.value) } })} />\r\n        C: <input type=\"number\" min={0} max={999} value={value.attrs.c.toString()} onChange={(e) => onChange({ ...value, attrs: { ...value.attrs, c: Number(e.target.value) } })} />\r\n        D: <input type=\"number\" min={0} max={999} value={value.attrs.d.toString()} onChange={(e) => onChange({ ...value, attrs: { ...value.attrs, d: Number(e.target.value) } })} />\r\n        S: <input type=\"number\" min={0} max={999} value={value.attrs.s.toString()} onChange={(e) => onChange({ ...value, attrs: { ...value.attrs, s: Number(e.target.value) } })} />\r\n        技: <ul>{value.moves.map((move, i) => (\r\n            <li>{move.name}({PokemonTypeShort[move.type]}{move.power}{MoveKindShort[move.moveKind]})\r\n                <button onClick={(e) => onSortMoveClick(i, -1)}>↑</button>\r\n                <button onClick={(e) => onSortMoveClick(i, 1)}>↓</button>\r\n                <button onClick={(e) => onDeleteMove(i)}>🗑</button>\r\n            </li>))}</ul>\r\n        <MoveInput value={newMove} onChange={setNewMove} />\r\n        <button onClick={() => {\r\n            onChange({ ...value, moves: [...value.moves, newMove] });\r\n            setNewMove(EmptyMyPokemonMove);\r\n        }}>技追加</button>\r\n        <MoveInput value={newDynamaxMove} onChange={setNewDinamaxMove} />\r\n        <button onClick={() => {\r\n            onChange({ ...value, moves: [...value.moves, newDynamaxMove] });\r\n            setNewDinamaxMove(EmptyMyPokemonMove);\r\n        }}>DM技追加</button>\r\n        <a href=\"https://wiki.xn--rckteqa2e.com/wiki/%E3%83%80%E3%82%A4%E3%83%9E%E3%83%83%E3%82%AF%E3%82%B9%E3%82%8F%E3%81%96\" target=\"_blank\" rel=\"noreferrer noopener\">DM情報</a>\r\n    </div>);\r\n}\r\n\r\nexport interface MyPartyEditorProps {\r\n    value: MyParty;\r\n    onChange: (value: MyParty) => void;\r\n}\r\n\r\nexport function MyPartyEditor(props: MyPartyEditorProps) {\r\n    const [editingPokemon, setEditingPokemon] = useState<MyPokemon>(EmptyMyPokemon);\r\n    const pokes = props.value.myPokemons;\r\n    const onChosenChange = useCallback((index: number, checked: boolean) => {\r\n        const newPokes = [...props.value.myPokemons];\r\n        newPokes[index] = { ...props.value.myPokemons[index], chosen: checked };\r\n        props.onChange({ ...props.value, myPokemons: newPokes });\r\n    }, [props]);\r\n    const onSortPokemonClick = useCallback((index: number, direction: number) => {\r\n        const newPokes = [...props.value.myPokemons];\r\n        const newIndex = index + direction;\r\n        if (newIndex < 0 || newIndex >= newPokes.length) {\r\n            return;\r\n        }\r\n        const tmp = newPokes[index];\r\n        newPokes[index] = newPokes[newIndex];\r\n        newPokes[newIndex] = tmp;\r\n        props.onChange({ ...props.value, myPokemons: newPokes });\r\n    }, [props]);\r\n    const onEditPokemonClick = useCallback((index: number) => {\r\n        const newPokes = [...props.value.myPokemons];\r\n        const editPoke = newPokes.splice(index, 1)[0];\r\n        setEditingPokemon(editPoke);\r\n        props.onChange({ ...props.value, myPokemons: newPokes });\r\n    }, [props]);\r\n    const onDeletePokemonClick = useCallback((index: number) => {\r\n        const newPokes = [...props.value.myPokemons];\r\n        newPokes.splice(index, 1);\r\n        props.onChange({ ...props.value, myPokemons: newPokes });\r\n    }, [props]);\r\n    return (\r\n        <div>\r\n            <h2>自分</h2>\r\n            <div><MyPokemonEditor value={editingPokemon} onChange={setEditingPokemon} /><button onClick={() => {\r\n                props.onChange({ ...props.value, myPokemons: [...props.value.myPokemons, editingPokemon] });\r\n                setEditingPokemon(EmptyMyPokemon);\r\n            }}>追加</button></div>\r\n            <div>\r\n                <table>\r\n                    <tbody>\r\n                        {pokes.map((poke, i) => (<tr key={i}>\r\n                            <td><label><input type=\"checkbox\" checked={poke.chosen} onChange={(e) => onChosenChange(i, e.target.checked)} />{poke.name}</label></td>\r\n                            <td><button onClick={(e) => onSortPokemonClick(i, -1)}>↑</button></td>\r\n                            <td><button onClick={(e) => onSortPokemonClick(i, 1)}>↓</button></td>\r\n                            <td><button onClick={(e) => onEditPokemonClick(i)}>🖊</button></td>\r\n                            <td><button onClick={(e) => onDeletePokemonClick(i)}>🗑</button></td>\r\n                        </tr>))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useCallback, useRef } from 'react';\r\nimport { OpponentParty } from './model';\r\nimport { PokemonSelect } from './PokemonSelect';\r\n\r\nexport interface OpponentPartyEditorProps {\r\n    value: OpponentParty;\r\n    onChange: (value: OpponentParty) => void;\r\n}\r\n\r\nexport function OpponentPartyEditor(props: OpponentPartyEditorProps) {\r\n    const [newPokemon, setNewPokemon] = useState<string>('');\r\n    const newPokemonInputRef = useRef<HTMLInputElement | null>(null);\r\n    const pokes = props.value.opponentPokemons;\r\n    const onAddPokemonClick = useCallback(() => {\r\n        const newPokes = [...props.value.opponentPokemons];\r\n        newPokes.push({ name: newPokemon, chosen: false });\r\n        props.onChange({ ...props.value, opponentPokemons: newPokes });\r\n        setNewPokemon('');\r\n        setTimeout(() => {\r\n            newPokemonInputRef.current?.focus();\r\n        }, 10);\r\n    }, [props, newPokemon]);\r\n    const onChosenChange = useCallback((index: number, checked: boolean) => {\r\n        const newPokes = [...props.value.opponentPokemons];\r\n        newPokes[index] = { ...props.value.opponentPokemons[index], chosen: checked };\r\n        props.onChange({ ...props.value, opponentPokemons: newPokes });\r\n    }, [props]);\r\n    const onDeletePokemonClick = useCallback((index: number) => {\r\n        const newPokes = [...props.value.opponentPokemons];\r\n        newPokes.splice(index, 1);\r\n        props.onChange({ ...props.value, opponentPokemons: newPokes });\r\n    }, [props]);\r\n    return (<div>\r\n        <h2>相手</h2>\r\n        <div>\r\n            <PokemonSelect ref={newPokemonInputRef} value={newPokemon} onChange={setNewPokemon} onSubmit={onAddPokemonClick} />\r\n            <button onClick={onAddPokemonClick}>追加</button>\r\n        </div>\r\n        <div>\r\n            <table>\r\n                <tbody>\r\n                    {pokes.map((poke, i) => <tr key={i}><td><label><input type=\"checkbox\" checked={poke.chosen} onChange={(e) => onChosenChange(i, e.target.checked)} />{poke.name}</label></td><td><button onClick={(e) => onDeletePokemonClick(i)}>🗑</button></td></tr>)}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>)\r\n}\r\n","import React, { useCallback } from 'react';\r\nimport { MyParty, OpponentParty, BothParty } from './model';\r\nimport { MyPartyEditor } from './MyPartyEditor';\r\nimport { OpponentPartyEditor } from './OpponentPartyEditor';\r\n\r\nexport function PartyEditor(props: { party: BothParty, onChange: (party: BothParty) => void }) {\r\n    const setMyParty = useCallback((newMyParty: MyParty) => {\r\n        props.onChange({ ...props.party, myParty: newMyParty });\r\n    }, [props]);\r\n    const setOpponentParty = useCallback((newOpponentParty: OpponentParty) => {\r\n        props.onChange({ ...props.party, opponentParty: newOpponentParty });\r\n    }, [props]);\r\n\r\n    return (\r\n        <div className=\"PartyEditor\">\r\n            <OpponentPartyEditor value={props.party.opponentParty} onChange={setOpponentParty} />\r\n            <MyPartyEditor value={props.party.myParty} onChange={setMyParty} />\r\n        </div>\r\n    );\r\n}\r\n","import { BothParty, MyPokemon, OpponentPokemon } from \"./model\";\r\nimport React, { useCallback } from \"react\";\r\n\r\nexport interface SelectedMatch {\r\n    myPokemonIndex: number;\r\n    opponentPokemonIndex: number;\r\n}\r\n\r\nexport interface SelectedMatchPokemon {\r\n    myPokemon?: MyPokemon;\r\n    opponentPokemon?: OpponentPokemon;\r\n}\r\n\r\nexport interface MatchSelectorProps {\r\n    party: BothParty;\r\n    selectedMatch: SelectedMatch;\r\n    onChange: (selectedMatch: SelectedMatch, selectedMatchPokemon: SelectedMatchPokemon) => void;\r\n}\r\n\r\nfunction getMatch(party: BothParty, selectedMatch: SelectedMatch): SelectedMatchPokemon {\r\n    return { myPokemon: party.myParty.myPokemons[selectedMatch.myPokemonIndex], opponentPokemon: party.opponentParty.opponentPokemons[selectedMatch.opponentPokemonIndex] };\r\n}\r\n\r\nexport function MatchSelector({ party, selectedMatch, onChange }: MatchSelectorProps) {\r\n    const setSelectedMyPokemonIndex = useCallback((i) => {\r\n        const newMatch = { ...selectedMatch, myPokemonIndex: i };\r\n        onChange(newMatch, getMatch(party, newMatch));\r\n    }, [party, selectedMatch, onChange]);\r\n    const setSelectedOpponentPokemonIndex = useCallback((i) => {\r\n        const newMatch = { ...selectedMatch, opponentPokemonIndex: i };\r\n        onChange(newMatch, getMatch(party, newMatch));\r\n    }, [party, selectedMatch, onChange]);\r\n    return (\r\n        <div className=\"MatchSelector\">\r\n            <div>自分: {party.myParty.myPokemons.map((myPokemon, i) => <button key={i} onClick={() => setSelectedMyPokemonIndex(i)} className={(i === selectedMatch.myPokemonIndex ? 'selected ' : ' ') + (myPokemon.chosen ? 'chosen ' : ' ')}>{myPokemon.name}</button>)}</div>\r\n            <div>相手: {party.opponentParty.opponentPokemons.map((opponentPokemon, i) => <button key={i} onClick={() => setSelectedOpponentPokemonIndex(i)} className={(i === selectedMatch.opponentPokemonIndex ? 'selected ' : '') + (opponentPokemon.chosen ? 'chosen ' : ' ')}>{opponentPokemon.name}</button>)}</div>\r\n        </div>\r\n    );\r\n}\r\n","const localStorageKey = 'pokemon-damage-estimator-log';\r\n\r\nexport function appendLog(message: string) {\r\n    localStorage.setItem(localStorageKey, getLog() + message);\r\n}\r\n\r\nexport function getLog(): string {\r\n    return localStorage.getItem(localStorageKey) || '';\r\n}\r\n\r\nexport function clearLog() {\r\n    localStorage.removeItem(localStorageKey);\r\n}\r\n","import React, { useState, useCallback, useRef, useEffect } from 'react';\r\nimport { OpponentParty, BothParty } from './model';\r\nimport { PokemonSelect } from './PokemonSelect';\r\nimport { SelectedMatchPokemon } from './MatchSelector';\r\nimport { appendLog, getLog, clearLog } from './logSaver';\r\n\r\nexport interface LoggingProps {\r\n    party: BothParty;\r\n    selectedMatchPokemon: SelectedMatchPokemon;\r\n}\r\n\r\nfunction putMessage(message: string) {\r\n    appendLog(message);\r\n}\r\n\r\nexport function Logging({ party, selectedMatchPokemon }: LoggingProps) {\r\n    const [message, setMessage] = useState('');\r\n    const [displayMessage, setDisplayMessage] = useState(false);\r\n    const [savedMessage, setSavedMessage] = useState('');\r\n    const onTextareaKeydown = useCallback((e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n        if (e.key === 'Enter' && e.shiftKey) {\r\n            e.preventDefault();\r\n            const fullMessage = `${(new Date()).toISOString()}\\n${selectedMatchPokemon.myPokemon?.name} vs ${selectedMatchPokemon.opponentPokemon?.name}:\\n${message}\\n\\n`;\r\n            putMessage(fullMessage);\r\n            setMessage('');\r\n        }\r\n    }, [selectedMatchPokemon, message]);\r\n\r\n    useEffect(() => {\r\n        if (displayMessage) {\r\n            setSavedMessage(getLog());\r\n        }\r\n    }, [displayMessage]);\r\n\r\n    const onGameEndClick = useCallback((gameResult: string) => {\r\n        const result = `バトル終了: ${gameResult}`;\r\n        const myChoices = party.myParty.myPokemons.map((poke) => `${poke.chosen ? '☆' : ''}${poke.name}`).join(' ');\r\n        const opponentChoices = party.opponentParty.opponentPokemons.map((poke) => `${poke.chosen ? '☆' : ''}${poke.name}`).join(' ');\r\n        const fullMessage = `${(new Date()).toISOString()}\\n${result}\\n自分選出: ${myChoices}\\n相手選出: ${opponentChoices}\\n\\n------------\\n\\n`;\r\n        putMessage(fullMessage);\r\n    }, [party]);\r\n\r\n    const onClearLogClick = useCallback(() => {\r\n        clearLog();\r\n        setDisplayMessage(false);\r\n    }, []);\r\n\r\n    return (<div className=\"Logging\">\r\n        <div>\r\n            <textarea value={message} onChange={(e) => setMessage(e.target.value)} onKeyDown={onTextareaKeydown} />\r\n        </div>\r\n        <div>\r\n            <button onClick={() => onGameEndClick('勝ち')}>勝ち</button><button onClick={() => onGameEndClick('負け')}>負け</button><button onClick={() => onGameEndClick('その他')}>他終了</button>\r\n            <label><input type=\"checkbox\" checked={displayMessage} onChange={(e) => setDisplayMessage(e.target.checked)} />ログ表示</label>\r\n        </div>\r\n        {\r\n            displayMessage && (<div><textarea value={savedMessage} /><button onClick={() => onClearLogClick()}>消去</button></div>)\r\n        }\r\n    </div>);\r\n}\r\n","import React, { useMemo, useState, useCallback } from 'react';\nimport './App.css';\nimport { BothParty, EmptyBothParty } from './model';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { DamageView } from './DamageView';\nimport { ExternalSiteView } from './ExternalSiteView';\nimport { PartyEditor } from './PartyEditor';\nimport { MatchSelector, SelectedMatch, SelectedMatchPokemon } from './MatchSelector';\nimport { Logging } from './Logging';\n\nfunction App() {\n  const location = useLocation();\n  const history = useHistory();\n\n  const urlSearchParams = new URLSearchParams(location.search);\n  const partyJSON = urlSearchParams.get('party');\n  const party = useMemo(() => partyJSON ? JSON.parse(partyJSON) : EmptyBothParty, [partyJSON]);\n  const setParty = (party: BothParty) => {\n    history.push(`/?party=${JSON.stringify(party)}`);\n  }\n  const [displayPartyEditor, setDisplayPartyEditor] = useState(true);\n  const [selectedMatch, setSelectedMatch] = useState<SelectedMatch>({ myPokemonIndex: 0, opponentPokemonIndex: 0 });\n  const [selectedMatchPokemon, setSelectedMatchPokemon] = useState<SelectedMatchPokemon>({});\n  const onMatchSelectorChange = useCallback((selectedMatch: SelectedMatch, selectedMatchPokemon: SelectedMatchPokemon) => {\n    setSelectedMatch(selectedMatch);\n    setSelectedMatchPokemon(selectedMatchPokemon);\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <div>\n        <input type=\"checkbox\" checked={displayPartyEditor} onChange={(e) => setDisplayPartyEditor(e.target.checked)} />\n        <div style={{ display: displayPartyEditor ? \"block\" : \"none\" }}>\n          <PartyEditor party={party} onChange={setParty} />\n          <div className=\"about\">ポケモンバトルのダメージ予測ツール <a href=\"https://github.com/select766/pokemon-damage-estimator\">https://github.com/select766/pokemon-damage-estimator</a></div>\n        </div>\n      </div>\n      <div>\n        <MatchSelector party={party} selectedMatch={selectedMatch} onChange={onMatchSelectorChange} />\n        <Logging party={party} selectedMatchPokemon={selectedMatchPokemon} />\n        <DamageView party={party} selectedMatchPokemon={selectedMatchPokemon} />\n      </div>\n      <ExternalSiteView pokemonName={selectedMatchPokemon.opponentPokemon?.name || ''} />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { HashRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}